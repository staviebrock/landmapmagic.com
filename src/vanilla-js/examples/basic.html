<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LandMapMagic Vanilla JS - Basic Example</title>
    
    <!-- MapLibre CSS (required) -->
    <link href='https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css' rel='stylesheet' />
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            padding: 20px;
            background: linear-gradient(135deg, #2E8B57, #4A90E2);
            color: white;
        }
        
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        
        .header p {
            margin: 8px 0 0 0;
            opacity: 0.9;
        }
        
        #map {
            width: 100%;
            height: 600px;
        }
        
        .info {
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }
        
        .info h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        
        .info p {
            margin: 0;
            color: #666;
            line-height: 1.5;
        }
        
        .controls {
            padding: 20px;
            border-top: 1px solid #e9ecef;
        }
        
        .controls button {
            margin: 0 10px 10px 0;
            padding: 8px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .controls button:hover {
            background: #0056b3;
        }
        
        .controls button.active {
            background: #28a745;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŒ¾ LandMapMagic Vanilla JS</h1>
            <p>Interactive land data maps for any web application</p>
        </div>
        
        <div id="map"></div>
        
        <div class="info">
            <h3>About This Example</h3>
            <p>
                This demonstrates the basic usage of LandMapMagic Vanilla JS. The map shows agricultural 
                land data including soil types (SSURGO), crop data (CDL), and survey boundaries (PLSS). 
                Use the legend to toggle layers on and off, and click on features to see detailed information.
            </p>
        </div>
        
        <div class="controls">
            <h3>Programmatic Controls</h3>
            <button onclick="showSoilData()">Show Soil Data</button>
            <button onclick="showCropData()">Show Crop Data</button>
            <button onclick="showSurveyData()">Show Survey Data</button>
            <button onclick="hideAllLayers()">Hide All</button>
            <button onclick="flyToIowa()">Fly to Iowa</button>
            <button onclick="flyToNebraska()">Fly to Nebraska</button>
        </div>
    </div>

    <!-- LandMapMagic Vanilla JS -->
    <script src="https://static.landmapmagic.com/js/landmap-vanilla-latest.js"></script>
    
    <script>
        let landMap;
        
        // Initialize the map
        LandMapMagic.createMap('map', {
            apiKey: 'dev', // Replace with your API key
            initialCenter: [-93.5, 42.0], // Iowa
            initialZoom: 8,
            availableLayers: ['ssurgo', 'cdl', 'plss'],
            initialVisibleLayers: ['ssurgo'],
            showLegend: true,
            showClickInfo: true,
            onMapLoad: function(map) {
                landMap = map;
                console.log('ðŸŽ‰ Map loaded successfully!');
                console.log('Visible layers:', map.getVisibleLayers());
            },
            onError: function(error) {
                console.error('âŒ Map error:', error);
                alert('Failed to load map: ' + error.message);
            }
        });
        
        // Control functions
        function showSoilData() {
            if (landMap) {
                landMap.showLayer('ssurgo');
                updateButtonStates();
            }
        }
        
        function showCropData() {
            if (landMap) {
                landMap.showLayer('cdl');
                updateButtonStates();
            }
        }
        
        function showSurveyData() {
            if (landMap) {
                landMap.showLayer('plss');
                updateButtonStates();
            }
        }
        
        function hideAllLayers() {
            if (landMap) {
                landMap.hideLayer('ssurgo');
                landMap.hideLayer('cdl');
                landMap.hideLayer('plss');
                updateButtonStates();
            }
        }
        
        function flyToIowa() {
            if (landMap) {
                const map = landMap.getMap();
                map.flyTo({
                    center: [-93.5, 42.0],
                    zoom: 8,
                    duration: 2000
                });
            }
        }
        
        function flyToNebraska() {
            if (landMap) {
                const map = landMap.getMap();
                map.flyTo({
                    center: [-99.9, 41.5],
                    zoom: 8,
                    duration: 2000
                });
            }
        }
        
        function updateButtonStates() {
            if (!landMap) return;
            
            const visible = landMap.getVisibleLayers();
            const buttons = document.querySelectorAll('.controls button');
            
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            
            // This is just for demo - in real apps you'd have better state management
            console.log('Currently visible layers:', visible);
        }
    </script>
</body>
</html>
